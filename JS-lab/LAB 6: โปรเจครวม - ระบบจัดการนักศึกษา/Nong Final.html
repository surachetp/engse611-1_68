<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î)</title>
<style>
    body { 
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        margin: 20px; 
        background: #f0f8ff;
        color: #333;
    }
    h1 { color: #2c3e50; text-align: center; }
    form { background: #fff; padding: 15px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); margin-bottom: 20px; }
    input, select, button { padding: 8px; margin: 5px 5px 5px 0; border-radius: 5px; border: 1px solid #ccc; outline: none; transition: 0.3s; }
    input:focus, select:focus { border-color: #4CAF50; }
    button { background-color: #4CAF50; color: white; border: none; cursor: pointer; }
    button:hover { background-color: #45a049; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #fff; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
    th { background: linear-gradient(to right, #4CAF50, #81C784); color: white; }
    tr:hover { background-color: #f1f1f1; }
    .action-buttons button { background-color: #2196F3; margin-right: 5px; }
    .action-buttons button:hover { background-color: #0b7dda; }
    .delete-btn { background-color: #f44336; }
    .delete-btn:hover { background-color: #da190b; }
    .stats { margin-top: 20px; background: #fff; padding: 10px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    .contact-inputs input { width: 150px; margin-right: 5px; }
</style>
</head>
<body>

<h1>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ üéì</h1>

<form id="studentForm">
    <input type="hidden" id="studentId">
    <input type="text" id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠" required>
    <input type="date" id="dob" placeholder="‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î" required>
    <input type="number" step="0.01" id="grade" placeholder="‡πÄ‡∏Å‡∏£‡∏î" required>
    <input type="text" id="address" placeholder="‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà">
    <div class="contact-inputs">
        <input type="text" id="facebook" placeholder="Facebook">
        <input type="text" id="line" placeholder="Line">
        <input type="text" id="instagram" placeholder="IG">
        <input type="text" id="tel" placeholder="Tel">
    </div>
    <button type="submit">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</button>
</form>

<h3>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤/‡∏Å‡∏£‡∏≠‡∏á/‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö</h3>
<input type="text" id="searchName" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠">
<input type="number" step="0.01" id="minGrade" placeholder="‡πÄ‡∏Å‡∏£‡∏î‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥">
<select id="sortOption">
    <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö --</option>
    <option value="gradeAsc">‡πÄ‡∏Å‡∏£‡∏î‡∏ô‡πâ‡∏≠‡∏¢ ‚Üí ‡∏°‡∏≤‡∏Å</option>
    <option value="gradeDesc">‡πÄ‡∏Å‡∏£‡∏î‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢</option>
    <option value="ageAsc">‡∏≠‡∏≤‡∏¢‡∏∏‡∏ô‡πâ‡∏≠‡∏¢ ‚Üí ‡∏°‡∏≤‡∏Å</option>
    <option value="ageDesc">‡∏≠‡∏≤‡∏¢‡∏∏‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢</option>
</select>
<button onclick="applyFilter()">‡∏Å‡∏£‡∏≠‡∏á/‡πÄ‡∏£‡∏µ‡∏¢‡∏á</button>
<button onclick="clearFilter()">‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≠‡∏á</button>

<table id="studentTable">
    <thead>
        <tr>
            <th>ID</th>
            <th>‡∏ä‡∏∑‡πà‡∏≠</th>
            <th>‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</th>
            <th>‡∏≠‡∏≤‡∏¢‡∏∏</th>
            <th>‡πÄ‡∏Å‡∏£‡∏î</th>
            <th>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</th>
            <th>Facebook</th>
            <th>Line</th>
            <th>IG</th>
            <th>Tel</th>
            <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<div class="stats">
    <h3>‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ üìä</h3>
    <p>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: <span id="count">0</span></p>
    <p>‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢: <span id="average">0</span></p>
    <p>‡πÄ‡∏Å‡∏£‡∏î‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: <span id="max">0</span></p>
    <p>‡πÄ‡∏Å‡∏£‡∏î‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î: <span id="min">0</span></p>
</div>

<script>
// ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤
let students = [
    { id: 1, name: "Surachet Pengcom", dob: "1989-08-06", grade: 3.5, address: "‡∏•‡∏≥‡∏û‡∏π‡∏ô", facebook: "Noinong FreeSize", line: "noinong_f50", instagram: "Noinong FreeSize", tel: "0801172421" },
    
];

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏
function calculateAge(dob) {
    let birthDate = new Date(dob);
    let today = new Date();
    let age = today.getFullYear() - birthDate.getFullYear();
    let m = today.getMonth() - birthDate.getMonth();
    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) age--;
    return age;
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤
function saveStudent(student) {
    let idx = students.findIndex(s => s.id === student.id);
    if (idx !== -1) students[idx] = student;
    else students.push(student);
    renderTable(students);
}

// ‡∏•‡∏ö‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤
function removeStudent(id) {
    if (confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
        students = students.filter(s => s.id !== id);
        renderTable(students);
    }
}

// ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤
function editStudent(id) {
    let s = students.find(s => s.id === id);
    if (s) {
        document.getElementById("studentId").value = s.id;
        document.getElementById("name").value = s.name;
        document.getElementById("dob").value = s.dob;
        document.getElementById("grade").value = s.grade;
        document.getElementById("address").value = s.address;
        document.getElementById("facebook").value = s.facebook;
        document.getElementById("line").value = s.line;
        document.getElementById("instagram").value = s.instagram;
        document.getElementById("tel").value = s.tel;
    }
}

// ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
function updateStats(list) {
    let count = list.length;
    let avg = count ? (list.reduce((sum, s) => sum + s.grade, 0)/count).toFixed(2) : 0;
    let max = count ? Math.max(...list.map(s => s.grade)) : 0;
    let min = count ? Math.min(...list.map(s => s.grade)) : 0;
    document.getElementById("count").textContent = count;
    document.getElementById("average").textContent = avg;
    document.getElementById("max").textContent = max;
    document.getElementById("min").textContent = min;
}

// ‡πÅ‡∏™‡∏î‡∏á Table
function renderTable(list) {
    let tbody = document.querySelector("#studentTable tbody");
    tbody.innerHTML = "";
    list.forEach(s => {
        let age = calculateAge(s.dob);
        let tr = document.createElement("tr");
        tr.innerHTML = `
            <td>${s.id}</td>
            <td>${s.name}</td>
            <td>${s.dob}</td>
            <td>${age}</td>
            <td>${s.grade}</td>
            <td>${s.address}</td>
            <td>${s.facebook}</td>
            <td>${s.line}</td>
            <td>${s.instagram}</td>
            <td>${s.tel}</td>
            <td class="action-buttons">
                <button onclick="editStudent(${s.id})">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                <button class="delete-btn" onclick="removeStudent(${s.id})">‡∏•‡∏ö</button>
            </td>
        `;
        tbody.appendChild(tr);
    });
    updateStats(list);
}

// ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤/‡∏Å‡∏£‡∏≠‡∏á/‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö
function applyFilter() {
    let name = document.getElementById("searchName").value.toLowerCase();
    let minGrade = parseFloat(document.getElementById("minGrade").value);
    let sortOption = document.getElementById("sortOption").value;

    let filtered = students.filter(s => 
        s.name.toLowerCase().includes(name) && 
        (isNaN(minGrade) || s.grade >= minGrade)
    );

    if(sortOption === "gradeAsc") filtered.sort((a,b) => a.grade - b.grade);
    if(sortOption === "gradeDesc") filtered.sort((a,b) => b.grade - a.grade);
    if(sortOption === "ageAsc") filtered.sort((a,b) => calculateAge(a.dob) - calculateAge(b.dob));
    if(sortOption === "ageDesc") filtered.sort((a,b) => calculateAge(b.dob) - calculateAge(a.dob));

    renderTable(filtered);
}

function clearFilter() {
    document.getElementById("searchName").value = "";
    document.getElementById("minGrade").value = "";
    document.getElementById("sortOption").value = "";
    renderTable(students);
}

// ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤
document.getElementById("studentForm").addEventListener("submit", function(e){
    e.preventDefault();
    let id = document.getElementById("studentId").value ? Number(document.getElementById("studentId").value) : 
             (students.length ? Math.max(...students.map(s=>s.id)) + 1 : 1);
    let student = {
        id,
        name: document.getElementById("name").value,
        dob: document.getElementById("dob").value,
        grade: Number(document.getElementById("grade").value),
        address: document.getElementById("address").value,
        facebook: document.getElementById("facebook").value,
        line: document.getElementById("line").value,
        instagram: document.getElementById("instagram").value,
        tel: document.getElementById("tel").value
    };
    saveStudent(student);
    this.reset();
    document.getElementById("studentId").value = "";
});

// ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
renderTable(students);
</script>

</body>
</html>
